<div class="bg-fondo-blanco p-3 rounded-xl shadow-md h-full flex flex-col">
    <div class="flex justify-end items-center py-2 flex-wrap-reverse gap-3">
        <!--<div class="mb-3 flex space-x-2">
            <p-button 
                type="button" 
                icon="pi pi-chevron-left" 
                (onClick)="prev()" 
                [disabled]="isFirstPage()" 
                styleClass="p-button-text focus:outline-none focus:ring-2 focus:ring-fondo-verde" />
            <p-button 
                type="button"
                icon="pi pi-refresh" 
                (onClick)="reset()" 
                styleClass="p-button-text focus:outline-none focus:ring-2 focus:ring-fondo-verde" />
            <p-button 
                type="button" 
                icon="pi pi-chevron-right" 
                (onClick)="next()" 
                [disabled]="isLastPage()" 
                styleClass="p-button-text focus:outline-none focus:ring-2 focus:ring-fondo-verde" />
        </div>-->

        <div class="flex gap-2 items-center">
            <div class="relative flex items-center">
                <i class="pi pi-search absolute left-3 text-letra-gris-medio"></i>
                <input [(ngModel)]="busqueda" class="w-full pl-10 p-1 border border-letra-gris-medio rounded-md focus:outline-none focus:ring-1 focus:ring-fondo-verde focus:border-transparent" type="text" pInputText placeholder="Buscar" />
            </div>

            <a 
                [routerLink]="'/dashboard/datos-generales/eapb/registrar-eapb'"
                class="px-2 py-1 bg-letra-gris-claro rounded-md text-letra-negra hover:bg-fondo-verde hover:text-letra-blanca font-medium"
            >
                Registrar
            </a>
        </div>
    </div>
    <div class="flex-grow overflow-auto relative h-80">
        <p-table
            [value]="listaEAPB | buscarEAPB: busqueda"
            [paginator]="true"
            [rows]="5"
            [first]="first"
            [showCurrentPageReport]="true"
            currentPageReportTemplate="Mostrando del {first} al {last} de {totalRecords} entradas"
            (onPage)="pageChange($event)"
            [rowsPerPageOptions]="[10, 25, 50]"
            scrollable="true"
            scrollHeight="flex"
            styleClass="h-full"
        >
        <ng-template pTemplate="header">
            <tr>
            <th class="px-2 py-2 border-b border-letra-gris-medio w-2/4 sm:w-2/6 md:w-1/6">CÃ³digo</th>
            <th class="px-2 py-2 border-b border-letra-gris-medio sm:w-2/6 md:w-2/6 hidden sm:table-cell">Nombre</th>
            <th class="px-1 py-2 border-b border-letra-gris-medio w-1/4 lg:w-2/6 xl:1/6 hidden md:table-cell">Direccion</th>
            <th class="px-1 py-2 border-b border-letra-gris-medio w-1/6 hidden lg:table-cell">Telefono</th>
            <th class="px-1 py-2 border-b border-letra-gris-medio w-1/6 hidden xl:table-cell">Correo</th>
            <th class="px-1 py-2 border-b border-letra-gris-medio w-2/4 sm:w-2/6 md:w-1/4 text-center">Opciones</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-eapb>
            <tr>
            <td class="px-1 py-1 border-b border-letra-gris-claro">{{ eapb.codigo }}</td>
            <td class="px-1 py-1 border-b border-letra-gris-claro hidden sm:table-cell">{{ eapb.razonSocial }}</td>
            <td class="px-1 py-1 border-b border-letra-gris-claro hidden md:table-cell">{{ eapb.direccion }}</td>
            <td class="px-1 py-1 border-b border-letra-gris-claro hidden lg:table-cell">{{ eapb.telefono }}</td>
            <td class="px-1 py-1 border-b border-letra-gris-claro hidden xl:table-cell">{{ eapb.correo }}</td>
            <td class="px-1 py-1 border-b border-letra-gris-claro">
                <div class="flex gap-1 justify-center">
                <button (click)="actualizarEAPB(eapb)">
                    <i class="pi pi-pencil hover:bg-fondo-verde hover:text-letra-blanca p-2 rounded-full"></i>
                </button>
                <button (click)="cambiarEstado(eapb)">
                    <i 
                    [ngClass]="{'pi-lock hover:bg-color-rojo': eapb.estado == 'Activo', 'pi-lock-open hover:bg-fondo-verde': eapb.estado == 'Inactivo'}"
                    class="pi hover:text-letra-blanca p-2 rounded-full"
                    ></i>
                </button>
                </div>
            </td>
            </tr>
        </ng-template>
        <ng-template pTemplate="paginator">
            <div class="flex justify-end p-1 sticky bottom-0 bg-fondo-blanco">
            <p-paginator [rows]="5" [totalRecords]="listaEAPB.length" [rowsPerPageOptions]="[10, 25, 50]"></p-paginator>
            </div>
        </ng-template>
        </p-table>

    </div>
</div>

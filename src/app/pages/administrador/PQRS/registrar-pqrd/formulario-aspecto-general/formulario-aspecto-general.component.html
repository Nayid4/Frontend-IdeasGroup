<div class="bg-fondo-blanco flex flex-col">
    <form [formGroup]="formularioAspectosGenerales" (ngSubmit)="onSubmit()" class="flex flex-col gap-4">
      
        
        <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3">
            <!-- Datos del Usuario PQRD -->
            <div class="col-span-full text-letra-negra font-semibold">Datos del Usuario PQRD</div>
            
            <!-- Tipo de Documento -->
            <label class="flex flex-col gap-1 text-letra-negra font-normal col-span-full lg:col-span-1">
                Tipo de Documento
                <select formControlName="tipoDocumento" required
                class="text-md font-semibold border-letra-gris-medio border-1 border-solid rounded-md px-2 py-2 focus:outline-none">
                <option value="">Seleccione un Tipo</option>
                @for (doc of tiposDeDocumentos; track doc.id) {
                    <option [value]="doc.tipo">{{doc.tipo}}</option>
                }
                </select>
            </label>
    
            <!-- Documento -->
            <label class="flex flex-col gap-1 text-letra-negra font-normal">
            Documento
            <input formControlName="documento" type="number" required
                class="text-md font-semibold border-letra-gris-medio border-1 rounded-md px-2 py-2">
            </label>
    
            <!-- Nombres -->
            <label class="flex flex-col gap-1 text-letra-negra font-normal">
            Nombres
            <input formControlName="nombres" type="text" required
                class="text-md font-semibold border-letra-gris-medio border-1 rounded-md px-2 py-2">
            </label>
    
            <!-- Apellidos -->
            <label class="flex flex-col gap-1 text-letra-negra font-normal">
            Apellidos
            <input formControlName="apellidos" type="text" required
                class="text-md font-semibold border-letra-gris-medio border-1 rounded-md px-2 py-2">
            </label>
    
            <!-- Teléfono -->
            <label class="flex flex-col gap-1 text-letra-negra font-normal">
            Teléfono
            <input formControlName="telefono" type="text" required
                class="text-md font-semibold border-letra-gris-medio border-1 rounded-md px-2 py-2">
            </label>
    
            <!-- Correo -->
            <label class="flex flex-col gap-1 text-letra-negra font-normal">
            Correo
            <input formControlName="correo" type="email" required
                class="text-md font-semibold border-letra-gris-medio border-1 rounded-md px-2 py-2">
            </label>
        </div>

        <hr class="bg-letra-gris-medio text-letra-gris-medio">
  
        <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3">
            <!-- Fundamento del PQRD -->
            <div class="col-span-full text-letra-negra font-semibold mt-4">Fundamento del PQRD</div>
            
            <!-- Descripción -->
            <label class="flex flex-col gap-1 text-letra-negra font-normal">
                Descripción
                <textarea formControlName="descripcion" required
                    class="text-md font-semibold border-letra-gris-medio border-1 rounded-md px-2 py-2"></textarea>
            </label>
    
            <!-- Documento -->
            <label class="flex flex-col gap-1 text-letra-negra font-normal">
                Documento
                <input formControlName="documento" type="file" required
                    accept=".pdf, .doc, .docx"
                    class="text-md font-semibold border-letra-gris-medio border-1 border-solid rounded-md px-2 py-2">

                
            </label>
    
            <!-- Medio de Expresión -->
            <label class="flex flex-col gap-1 text-letra-negra font-normal">
                Medio de Expresión
                <select formControlName="medioDeExpresion" required
                    class="text-md font-semibold border-letra-gris-medio border-1 border-solid rounded-md px-2 py-2 focus:outline-none">
                    <option value="">Seleccione un Medio</option>
                    @for (medio of MediosDeExpresion; track medio.id) {
                        <option [value]="medio.tipo">{{medio.tipo}}</option>
                    }
                </select>
            </label>
    
            <!-- Tipo de Tecnología -->
            <label class="flex flex-col gap-1 text-letra-negra font-normal">
                Tipo de Tecnología
                <select formControlName="tipoDeTecnologia" required
                    class="text-md font-semibold border-letra-gris-medio border-1 border-solid rounded-md px-2 py-2 focus:outline-none">
                    <option value="">Seleccione un Tipo</option>
                    @for (tipo of tiposDeTecnologias; track tipo.id) {
                        <option [value]="tipo.tipo">{{tipo.tipo}}</option>
                    }
                </select>
            </label>
    
            <!-- Entidad Denunciada -->
            <label class="flex flex-col gap-1 text-letra-negra font-normal">
                Entidad Denunciada
                <select formControlName="entidadDenunciada" required
                    class="text-md font-semibold border-letra-gris-medio border-1 border-solid rounded-md px-2 py-2 focus:outline-none">
                    <option value="">Seleccione una Entidad</option>
                    @for (empresa of Empresas; track empresa.id) {
                        <option [value]="empresa.tipo">{{empresa.tipo}}</option>
                    }
                </select>
            </label>

            <!-- ID de la Entidad Denunciada -->
            <label class="flex flex-col gap-1 text-letra-negra font-normal">
                {{formularioAspectosGenerales.value.entidadDenunciada}} Denunciada
                @switch (formularioAspectosGenerales.value.entidadDenunciada) {
                    @case ("EAPB") {
                        <p-autoComplete
                            formControlName="idEntidadDenunciada"
                            [suggestions]="filteredEAPBs"
                            (completeMethod)="filterEAPBs($event)"
                            field="razonSocial"
                            [dropdown]="true"
                            placeholder="Seleccione una Entidad"
                            class="text-md font-semibold border-letra-gris-medio border-1 border-solid rounded-md px-2 py-2 focus:outline-none">
                        </p-autoComplete>
                    }
                    @case ("IPS") {
                        <p-autoComplete
                            formControlName="idEntidadDenunciada"
                            [suggestions]="filteredIPSs"
                            (completeMethod)="filterIPSs($event)"
                            field="razonSocial"
                            [dropdown]="true"
                            placeholder="Seleccione una Entidad"
                            class="text-md font-semibold border-letra-gris-medio border-1 border-solid rounded-md px-2 py-2 focus:outline-none">
                        </p-autoComplete>
                    }
                }
            </label>

        </div>

        <hr class="bg-letra-gris-medio text-letra-gris-medio">

        <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3">
            <!-- Tipología PQRD -->
            <div class="col-span-full text-letra-negra font-semibold mt-4">Tipología PQRD</div>
            
            <!-- Riesgo Vital -->
            <label class="flex items-center justify-between gap-1 text-letra-negra font-normal">
             Riesgo Vital
                <input formControlName="riesgoVital" type="checkbox" required>
            </label>
        </div>

        <hr class="bg-letra-gris-medio text-letra-gris-medio">

        <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3">
            <!-- Tipología PQRD -->
            <div class="col-span-full text-letra-negra font-semibold mt-4">Tipología PQRD</div>
    
             <!-- Motivo Específico -->
    <label class="flex flex-col gap-1 text-letra-negra font-normal">
        Motivo Específico
        <p-autoComplete 
            formControlName="motivoEspecifico" 
            (completeMethod)="filterMotivoEspecifico($event)"
            [suggestions]="filteredMotivosEspecificos" 
            field="nombre" 
            [dropdown]="true"
            (ngModelChange)="onMotivoEspecificoChange($event)" 
            placeholder="Seleccione un Motivo Específico"
            class="text-md font-semibold border-letra-gris-medio border-1 border-solid rounded-md px-2 py-2 focus:outline-none">
        </p-autoComplete>
    </label>

    <!-- Motivo General -->
    <label class="flex flex-col gap-1 text-letra-negra font-normal">
        Motivo General
        <p-autoComplete 
            formControlName="motivoGeneral" 
            [suggestions]="filteredMotivosGenerales" 
            field="nombre" 
            [dropdown]="true"
            (ngModelChange)="onMotivoGeneralChange($event)"
            placeholder="Seleccione un Motivo General"
            class="text-md font-semibold border-letra-gris-medio border-1 border-solid rounded-md px-2 py-2 focus:outline-none">
        </p-autoComplete>
    </label>

            <!-- Macro Motivo -->
            <label class="flex flex-col gap-1 text-letra-negra font-normal">
                Macro Motivo
                <select formControlName="macroMotivo" required
                    class="text-md font-semibold border-letra-gris-medio border-1 border-solid rounded-md px-2 py-2 focus:outline-none">
                    <option value="">Seleccione un Macro Motivo</option>
                    @for (macroMotivo of filteredMacroMotivos; track macroMotivo.id) {
                        <option [value]="macroMotivo.nombre">{{macroMotivo.nombre}}</option>
                    }
                </select>
            </label>
    
            <!-- Clasificación de la PQRD -->
            <label class="flex flex-col gap-1 text-letra-negra font-normal">
                Clasificación de la PQRD
                <select formControlName="clasificacionDeLaPQRD" required
                    class="text-md font-semibold border-letra-gris-medio border-1 border-solid rounded-md px-2 py-2 focus:outline-none">
                    <option value="">Seleccione una Clasificacion</option>
                    @for (clasificacion of clasificaciones; track clasificacion.id) {
                        <option [value]="clasificacion.tipo">{{clasificacion.tipo}}</option>
                    }
                </select>
            </label>
    
        </div>
    
    </form>
  </div>
  